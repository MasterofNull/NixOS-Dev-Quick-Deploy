# NixOS-Dev-Quick-Deploy AI Stack Environment Configuration
# Version: 6.0.0 (Integrated)
# Copy to ~/.config/nixos-ai-stack/.env and adjust as needed

# ============================================================================
# Shared Data Paths (NEW in v6.0.0)
# ============================================================================
# All data persists in shared directories that survive reinstalls
AI_STACK_DATA=${HOME}/.local/share/nixos-ai-stack
AI_STACK_CONFIG=${HOME}/.config/nixos-ai-stack
AI_STACK_PROFILE=personal  # personal|guest|none

# ============================================================================
# Model Configuration
# ============================================================================
# Default model for Lemonade inference
# See ai-stack/models/registry.json for available models
LEMONADE_DEFAULT_MODEL=Qwen/Qwen2.5-Coder-7B-Instruct

# HuggingFace token (optional, for private models)
HUGGING_FACE_HUB_TOKEN=

# Lemonade configuration
LEMONADE_HOST=0.0.0.0
LEMONADE_PORT=8080
LEMONADE_LOG_LEVEL=info
LEMONADE_WEB_CONCURRENCY=4
LEMONADE_CTX_SIZE=4096
LEMONADE_BASE_URL=http://lemonade:8080/api/v1

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL (TimescaleDB)
AIDB_POSTGRES_DB=mcp
AIDB_POSTGRES_USER=mcp
AIDB_POSTGRES_PASSWORD=change_me_in_production
AIDB_POSTGRES_HOST=postgres
AIDB_POSTGRES_PORT=5432

# Redis
AIDB_REDIS_PASSWORD=
AIDB_REDIS_HOST=redis
AIDB_REDIS_PORT=6379

# Qdrant Vector Database
QDRANT_HOST=qdrant
QDRANT_PORT=6333

# ============================================================================
# Service Ports (Configurable for Conflict Resolution)
# ============================================================================
# Adjust these if you have port conflicts
AIDB_PORT=8091          # AIDB MCP Server
LEMONADE_PORT=8080      # Lemonade vLLM inference
POSTGRES_PORT=5432      # PostgreSQL
REDIS_PORT=6379         # Redis
QDRANT_PORT=6333        # Qdrant
REDIS_INSIGHT_PORT=5540 # Redis Insight web UI

# ============================================================================
# MCP Server Configuration
# ============================================================================
AIDB_CONFIG=/app/config/config.yaml
AIDB_TELEMETRY_PATH=${AI_STACK_DATA}/telemetry/aidb-events.jsonl
HYBRID_TELEMETRY_PATH=${AI_STACK_DATA}/telemetry/hybrid-events.jsonl

# ============================================================================
# External Integrations (Optional)
# ============================================================================
# Google Search API (for agent web search)
GOOGLE_SEARCH_API_KEY=
GOOGLE_SEARCH_CX=

# ============================================================================
# Observability (Optional)
# ============================================================================
GRAFANA_ADMIN_PASSWORD=admin

# Log importer configuration
LOG_IMPORT_PATH=/data/logs/runs.jsonl
LOG_IMPORT_DSN=
LOG_IMPORT_INTERVAL=900
LOG_IMPORT_ROTATE=1
LOG_IMPORT_ROTATE_KEEP=5

# ============================================================================
# Development Overrides
# ============================================================================
# Uncomment for development mode
# DEBUG=true
# LOG_LEVEL=debug
# RELOAD=true  # Auto-reload on code changes

# ============================================================================
# Notes
# ============================================================================
# 1. This file is a template. Copy it to ~/.config/nixos-ai-stack/.env
# 2. Update passwords and API keys before deploying
# 3. AI_STACK_DATA path is where all persistent data lives
# 4. See docs/AI-STACK-FULL-INTEGRATION.md for detailed configuration
# 5. Model registry: ai-stack/models/registry.json
