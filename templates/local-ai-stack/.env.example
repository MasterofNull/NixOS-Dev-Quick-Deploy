# ============================================================================
# NixOS AI Stack Configuration
# Single source of truth for all services
# ============================================================================
# This file should be copied to ~/.config/nixos-ai-stack/.env
# Updated: 2026-01-10 - Production Hardening

# ============================================================================
# Data Paths
# ============================================================================
AI_STACK_ENV_FILE=~/.config/nixos-ai-stack/.env
AI_STACK_DATA=/home/your-user/.local/share/nixos-ai-stack

# ============================================================================
# Container Network Discovery
# ============================================================================
# Services communicate via container names on Docker network
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=mcp
POSTGRES_USER=mcp
POSTGRES_PASSWORD=change_me_in_production

REDIS_HOST=redis
REDIS_PORT=6379

QDRANT_HOST=qdrant
QDRANT_PORT=6333

LLAMA_CPP_HOST=llama-cpp
LLAMA_CPP_PORT=8080

AIDB_HOST=aidb
AIDB_PORT=8091

HYBRID_COORDINATOR_HOST=hybrid-coordinator
HYBRID_COORDINATOR_PORT=8092

RALPH_WIGGUM_HOST=ralph-wiggum
RALPH_WIGGUM_PORT=8098

AIDER_WRAPPER_HOST=aider-wrapper
AIDER_WRAPPER_PORT=8099

# ============================================================================
# Model Defaults
# ============================================================================
LLAMA_CPP_DEFAULT_MODEL=Qwen/Qwen2.5-Coder-7B-Instruct
EMBEDDING_MODEL=nomic-ai/nomic-embed-text-v1.5

# ============================================================================
# Ralph Wiggum Loop Settings
# ============================================================================
# Start permissive (20 iterations), optimize over time via continuous learning
RALPH_MAX_ITERATIONS_DEFAULT=20
RALPH_MAX_ITERATIONS_SIMPLE=10
RALPH_MAX_ITERATIONS_MEDIUM=30
RALPH_MAX_ITERATIONS_COMPLEX=50
RALPH_ADAPTIVE_ITERATIONS=true
RALPH_LOOP_ENABLED=true
RALPH_EXIT_CODE_BLOCK=2

# ============================================================================
# Continuous Learning
# ============================================================================
CONTINUOUS_LEARNING_ENABLED=true
LEARNING_PROCESSING_INTERVAL=3600
LEARNING_DATASET_THRESHOLD=1000
PATTERN_EXTRACTION_ENABLED=true

# ============================================================================
# Startup Validation & Dependency Checks
# ============================================================================
STARTUP_DEPENDENCY_CHECK=true
STARTUP_TIMEOUT_SECONDS=30
STARTUP_FAIL_FAST=false

# ============================================================================
# Telemetry & Observability
# ============================================================================
HYBRID_TELEMETRY_PATH=/data/telemetry/hybrid-events.jsonl
TELEMETRY_PATH=/data/telemetry/hybrid-events.jsonl
OTEL_TRACING_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317

# ============================================================================
# Feature Flags
# ============================================================================
ADAPTIVE_ITERATION_LIMITS=true
SELF_HEALING_ENABLED=false
PRE_FLIGHT_VALIDATION=true

# ============================================================================
# Development & Debugging
# ============================================================================
LOG_LEVEL=info
DEBUG_MODE=false

# ============================================================================
# Optional Credentials
# ============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me
HUGGING_FACE_HUB_TOKEN=
STACK_ENV=
